//Split the list in the middle and run recursivly the function until we got 2 sorted list and merge it
fn merge_sort<T: Ord + Clone>(arr : &[T]) -> Vec<T>{
    if arr.len() <= 1{          //if len(1) the list is "sorted"
        return arr.to_vec();
    }

    let idx_mid = arr.len()/2;
    let left = merge_sort(&arr[..idx_mid]); //at the end we got the left part sorted
    let right = merge_sort(&arr[idx_mid..]); //same for the right part

    merge(&left, &right) //merge both to complete the sort
}

//merge two lists in an ascending order
fn merge<T: Ord + Clone>(left : &[T], right : &[T]) -> Vec<T>{
    //Define a Vec of the size needed to merge both slice
    let mut result = Vec::with_capacity(left.len() + right.len());

    //create an iterator for each part
    let mut it_left = left.iter().cloned();
    let mut it_right = right.iter().cloned();

    let mut left_next = it_left.next();
    let mut right_next = it_right.next();

    //While both list aren't ended we push the smallest in the result slice
    while let (Some(l), Some(r)) = (left_next.as_ref(),right_next.as_ref())  {
        if l <= r{
            result.push(l.clone());
            left_next = it_left.next();
        }else{
            result.push(r.clone());
            right_next = it_right.next();
        }
    }
    
    //we fill the result with the rest
    result.extend(left_next.into_iter().chain(it_left));
    result.extend(right_next.into_iter().chain(it_right));

    result
}


fn main() {
    //Sorry for this x)
    let giant_array = [
  93, 84, 12, 56, 23, 78, 41, 91, 37, 65, 18, 87, 29, 48, 100, 32, 67, 53, 81, 97, 25, 74, 46, 17, 34, 62, 89, 21, 58, 13, 71, 39, 69, 43, 95, 27, 76, 49, 11, 36, 64, 82, 20, 55, 19, 72, 31, 60, 44, 92, 28, 77, 40, 14, 38, 66, 85, 22, 59, 16, 70, 33, 61, 47, 94, 26, 75, 42, 15, 35, 63, 83, 24, 57, 10, 73, 30, 68, 45, 96, 2, 79, 4, 98, 0, 7, 5, 99, 1, 8, 6, 101, 9, 80, 3, 86, 102, 234, 567, 890, 213, 456, 789, 123, 345, 678, 901, 200, 500, 800, 1000, 250, 550, 850, 150, 350, 650, 950, 222, 522, 822, 111, 311, 611, 911, 288, 588, 888, 177, 377, 677, 977, 266, 566, 866, 155, 355, 655, 955, 244, 544, 844, 133, 333, 633, 933, 221, 521, 821, 110, 310, 610, 910, 289, 589, 889, 178, 378, 678, 978, 267, 567, 867, 156, 356, 656, 956, 245, 545, 845, 134, 334, 634, 934, 223, 523, 823, 112, 312, 612, 912, 290, 590, 890, 179, 379, 679, 979, 268, 568, 868, 157, 357, 657, 957, 246, 546, 846, 135, 335, 635, 935, 224, 524, 824, 113, 313, 613, 913, 291, 591, 891, 180, 380, 680, 980, 269, 569, 869, 158, 358, 658, 958, 247, 547, 847, 136, 336, 636, 936, 225, 525, 825, 114, 314, 614, 914, 292, 592, 892, 181, 381, 681, 981, 270, 570, 870, 159, 359, 659, 959, 248, 548, 848, 137, 337, 637, 937, 226, 526, 826, 115, 315, 615, 915, 293, 593, 893, 182, 382, 682, 982, 271, 571, 871, 160, 360, 660, 960, 249, 549, 849, 138, 338, 638, 938, 227, 527, 827, 116, 316, 616, 916, 294, 594, 894, 183, 383, 683, 983, 272, 572, 872, 161, 361, 661, 961, 250, 550, 850, 140, 340, 640, 940, 230, 530, 830, 120, 320, 620, 920, 280, 580, 880, 170, 370, 670, 970, 260, 560, 860, 150, 350, 650, 950, 240, 540, 840, 130, 330, 630, 930, 220, 520, 820, 110, 310, 610, 910, 281, 581, 881, 171, 371, 671, 971, 261, 561, 861, 151, 351, 651, 951, 241, 541, 841, 131, 331, 631, 931, 221, 521, 821, 111, 311, 611, 911, 282, 582, 882, 172, 372, 672, 972, 262, 562, 862, 152, 352, 652, 952, 242, 542, 842, 132, 332, 632, 932, 222, 522, 822, 112, 312, 612, 912, 283, 583, 883, 173, 373, 673, 973, 263, 563, 863, 153, 353, 653, 953, 243, 543, 843, 133, 333, 633, 933, 223, 523, 823, 113, 313, 613, 913, 284, 584, 884, 174, 374, 674, 974, 264, 564, 864, 154, 354, 654, 954, 244, 544, 844, 134, 334, 634, 934, 224, 524, 824, 114, 314, 614, 914, 285, 585, 885, 175, 375, 675, 975, 265, 565, 865, 155, 355, 655, 955, 245, 545, 845, 135, 335, 635, 935, 225, 525, 825, 115, 315, 615, 915, 286, 586, 886, 176, 376, 676, 976, 266, 566, 866, 156, 356, 656, 956, 246, 546, 846, 136, 336, 636, 936, 226, 526, 826, 116, 316, 616, 916, 287, 587, 887, 177, 377, 677, 977, 267, 567, 867, 157, 357, 657, 957, 247, 547, 847, 137, 337, 637, 937, 227, 527, 827, 117, 317, 617, 917, 288, 588, 888, 178, 378, 678, 978, 268, 568, 868, 158, 358, 658, 958, 248, 548, 848, 138, 338, 638, 938, 228, 528, 828, 118, 318, 618, 918, 289, 589, 889, 179, 379, 679, 979, 269, 569, 869, 159, 359, 659, 959, 249, 549, 849, 139, 339, 639, 939, 229, 529, 829, 119, 319, 619, 919, 299, 599, 899, 189, 389, 689, 989, 279, 579, 879, 169, 369, 669, 969, 259, 559, 859, 149, 349, 649, 949, 239, 539, 839, 129, 329, 629, 929, 298, 598, 898, 188, 388, 688, 988, 278, 578, 878, 168, 368, 668, 968, 258, 558, 858, 148, 348, 648, 948, 238, 538, 838, 128, 328, 628, 928, 297, 597, 897, 187, 387, 687, 987, 277, 577, 877, 167, 367, 667, 967, 257, 557, 857, 147, 347, 647, 947, 237, 537, 837, 127, 327, 627, 927, 296, 596, 896, 186, 386, 686, 986, 276, 576, 876, 166, 366, 666, 966, 256, 556, 856, 146, 346, 646, 946, 236, 536, 836, 126, 326, 626, 926, 295, 595, 895, 185, 385, 685, 985, 275, 575, 875, 165, 365, 665, 965, 255, 555, 855, 145, 345, 645, 945, 235, 535, 835, 125, 325, 625, 925, 294, 594, 894, 184, 384, 684, 984, 274, 574, 874, 164, 364, 664, 964, 254, 554, 854, 144, 344, 644, 944, 234, 534, 834, 124, 324, 624, 924, 293, 593, 893, 183, 383, 683, 983, 273, 573, 873, 163, 363, 663, 963, 253, 553, 853, 143, 343, 643, 943, 233, 533, 833, 123, 323, 623, 923, 292, 592, 892, 182, 382, 682, 982, 272, 572, 872, 162, 362, 662, 962, 252, 552, 852, 142, 342, 642, 942, 232, 532, 832, 122, 322, 622, 922, 291, 591, 891, 181, 381, 681, 981, 271, 571, 871,161, 361, 661, 961, 251, 551, 851, 141, 341, 641, 941, 231, 531, 831, 121, 321, 621, 921, 290, 590, 890, 180, 380, 680, 980, 270, 570, 870, 160, 360, 660, 960, 250, 550, 850, 140, 340, 640, 940, 230, 530, 830, 120, 320, 620, 920, 280, 580, 880, 170, 370, 670, 970, 260, 560, 860, 150, 350, 650, 950, 240, 540, 840, 130, 330, 630, 930, 220, 520, 820, 110, 310, 610, 910, 281, 581, 881, 171, 371, 671, 971, 261, 561, 861, 151, 351, 651, 951, 241, 541, 841, 131, 331, 631, 931, 221, 521, 821, 111, 311, 611, 911, 282, 582, 882, 172, 372, 672, 972, 262, 562, 862, 152, 352, 652, 952, 242, 542, 842, 132, 332, 632, 932, 222, 522, 822, 112, 312, 612, 912, 283, 583, 883, 173, 373, 673, 973, 263, 563, 863, 153, 353, 653, 953, 243, 543, 843, 133, 333, 633, 933, 223, 523, 823, 113, 313, 613, 913, 284, 584, 884, 174, 374, 674, 974, 264, 564, 864, 154, 354, 654, 954, 244, 544, 844, 134, 334, 634, 934, 224, 524, 824, 114, 314, 614, 914, 285, 585, 885, 175, 375, 675, 975, 265, 565, 865, 155, 355, 655, 955, 245, 545, 845, 135, 335, 635, 935, 225, 525, 825, 115, 315, 615, 915, 286, 586, 886, 176, 376, 676, 976, 266, 566, 866, 156, 356, 656, 956, 246, 546, 846, 136, 336, 636, 936, 226, 526, 826, 116, 316, 616, 916, 287, 587, 887, 177, 377, 677, 977, 267, 567, 867, 157, 357, 657, 957, 247, 547, 847, 137, 337, 637, 937, 227, 527, 827, 117, 317, 617, 917, 288, 588, 888, 178, 378, 678, 978, 268, 568, 868, 158, 358, 658, 958, 248, 548, 848, 138, 338, 638, 938, 228, 528, 828, 118, 318, 618, 918, 289, 589, 889, 179, 379, 679, 979, 269, 569, 869, 159, 359, 659, 959, 249, 549, 849, 139, 339, 639, 939, 229, 529, 829, 119, 319, 619, 919, 299, 599, 899, 189, 389, 689, 989, 279, 579, 879, 169, 369, 669, 969, 259, 559, 859, 149, 349, 649, 949, 239, 539, 839, 129, 329, 629, 929, 298, 598, 898, 188, 388, 688, 988, 278, 578, 878, 168, 368, 668, 968, 258, 558, 858, 148, 348, 648, 948, 238, 538, 838, 128, 328, 628, 928, 297, 597, 897, 187, 387, 687, 987, 277, 577, 877, 167, 367, 667, 967, 257, 557, 857, 147, 347, 647, 947, 237, 537, 837, 127, 327, 627, 927, 296, 596, 896, 186, 386, 686, 986, 276, 576, 876, 166, 366, 666, 966, 256, 556, 856, 146, 346, 646, 946, 236, 536, 836, 126, 326, 626, 926, 295, 595, 895, 185, 385, 685, 985, 275, 575, 875, 165, 365, 665, 965, 255, 555, 855, 145, 345, 645, 945, 235, 535, 835, 125, 325, 625, 925, 294, 594, 894, 184, 384, 684, 984, 274, 574, 874, 164, 364, 664, 964, 254, 554, 854, 144, 344, 644, 944, 234, 534, 834, 124, 324, 624, 924, 293, 593, 893, 183, 383, 683, 983, 273, 573, 873, 163, 363, 663, 963, 253, 553, 853, 143, 343, 643, 943, 233, 533, 833, 123, 323, 623, 923, 292, 592, 892, 182, 382, 682, 982, 272, 572, 872, 162, 362, 662, 962, 252, 552, 852, 142, 342, 642, 942, 232, 532, 832, 122, 322, 622, 922, 291, 591, 891, 181, 381, 681, 981, 271, 571, 871, 161, 361, 661, 961, 251, 551, 851, 141, 341, 641, 941, 231, 531, 831, 121, 321, 621, 921, 290, 590, 890, 180, 380, 680, 980, 270, 570, 870, 160, 360, 660, 960, 250, 550, 850, 140, 340, 640, 940, 230, 530, 830, 120, 320, 620, 920, 280, 580, 880, 170, 370, 670, 970, 260, 560, 860, 150, 350, 650, 950, 240, 540, 840, 130, 330, 630, 930, 220, 520, 820, 110, 310, 610, 910, 281, 581, 881, 171, 371, 671, 971, 261, 561, 861, 151, 351, 651, 951, 241, 541, 841, 131, 331, 631, 931, 221, 521, 821, 111, 311, 611, 911, 282, 582, 882, 172, 372, 672, 972, 262, 562, 862, 152, 352, 652, 952, 242, 542, 842, 132, 332, 632, 932, 222, 522, 822, 112, 312, 612, 912, 283, 583, 883, 173, 373, 673, 973, 263, 563, 863, 153, 353, 653, 953, 243, 543, 843, 133, 333, 633, 933, 223, 523, 823, 113, 313, 613, 913, 284, 584, 884, 174, 374, 674, 974, 264, 564, 864, 154, 354, 654, 954, 244, 544, 844, 134, 334, 634, 934, 224, 524, 824, 114, 314, 614, 914, 285, 585, 885, 175, 375, 675, 975, 265, 565, 865, 155, 355, 655, 955, 245, 545, 845, 135, 335, 635, 935, 225, 525, 825, 115, 315, 615, 915, 286, 586, 886, 176, 376, 676, 976, 266, 566, 866, 156, 356, 656, 956, 246, 546, 846, 136, 336, 636, 936, 226, 526, 826, 116, 316, 616, 916, 287, 587, 887, 177, 377, 677, 977, 267, 567, 867, 157, 357, 657, 957, 247,247, 547, 847, 137, 337, 637, 937, 227, 527, 827, 117, 317, 617, 917, 288, 588, 888, 178, 378, 678, 978, 268, 568, 868, 158, 358, 658, 958, 248, 548, 848, 138, 338, 638, 938, 228, 528, 828, 118, 318, 618, 918, 289, 589, 889, 179, 379, 679, 979, 269, 569, 869, 159, 359, 659, 959, 249, 549, 849, 139, 339, 639, 939, 229, 529, 829, 119, 319, 619, 919, 299, 599, 899, 189, 389, 689, 989, 279, 579, 879, 169, 369, 669, 969, 259, 559, 859, 149, 349, 649, 949, 239, 539, 839, 129, 329, 629, 929, 298, 598, 898, 188, 388, 688, 988, 278, 578, 878, 168, 368, 668, 968, 258, 558, 858, 148, 348, 648, 948, 238, 538, 838, 128, 328, 628, 928, 297, 597, 897, 187, 387, 687, 987, 277, 577, 877, 167, 367, 667, 967, 257, 557, 857, 147, 347, 647, 947, 237, 537, 837, 127, 327, 627, 927, 296, 596, 896, 186, 386, 686, 986, 276, 576, 876, 166, 366, 666, 966, 256, 556, 856, 146, 346, 646, 946, 236, 536, 836, 126, 326, 626, 926, 295, 595, 895, 185, 385, 685, 985, 275, 575, 875, 165, 365, 665, 965, 255, 555, 855, 145, 345, 645, 945, 235, 535, 835, 125, 325, 625, 925, 294, 594, 894, 184, 384, 684, 984, 274, 574, 874, 164, 364, 664, 964, 254, 554, 854, 144, 344, 644, 944, 234, 534, 834, 124, 324, 624, 924, 293, 593, 893, 183, 383, 683, 983, 273, 573, 873, 163, 363, 663, 963, 253, 553, 853, 143, 343, 643, 943, 233, 533, 833, 123, 323, 623, 923, 292, 592, 892, 182, 382, 682, 982, 272, 572, 872, 162, 362, 662, 962, 252, 552, 852, 142, 342, 642, 942, 232, 532, 832, 122, 322, 622, 922, 291, 591, 891, 181, 381, 681, 981, 271, 571, 871, 161, 361, 661, 961, 251, 551, 851, 141, 341, 641, 941, 231, 531, 831, 121, 321, 621, 921, 290, 590, 890, 180, 380, 680, 980, 270, 570, 870, 160, 360, 660, 960, 250, 550, 850, 140, 340, 640, 940, 230, 530, 830, 120, 320, 620, 920, 280, 580, 880, 170, 370, 670, 970, 260, 560, 860, 150, 350, 650, 950, 240, 540, 840, 130, 330, 630, 930, 220, 520, 820, 110, 310, 610, 910, 281, 581, 881, 171, 371, 671, 971, 261, 561, 861, 151, 351, 651, 951, 241, 541, 841, 131, 331, 631, 931, 221, 521, 821, 111, 311, 611, 911, 282, 582, 882, 172, 372, 672, 972, 262, 562, 862, 152, 352, 652, 952, 242, 542, 842, 132, 332, 632, 932, 222, 522, 822, 112, 312, 612, 912, 283, 583, 883, 173, 373, 673, 973, 263, 563, 863, 153, 353, 653, 953, 243, 543, 843, 133, 333, 633, 933, 223, 523, 823, 113, 313, 613, 913, 284, 584, 884, 174, 374, 674, 974, 264, 564, 864, 154, 354, 654, 954, 244, 544, 844, 134, 334, 634, 934, 224, 524, 824, 114, 314, 614, 914, 285, 585, 885, 175, 375, 675, 975, 265, 565, 865, 155, 355, 655, 955, 245, 545, 845, 135, 335, 635, 935, 225, 525, 825, 115, 315, 615, 915, 286, 586, 886, 176, 376, 676, 976, 266, 566, 866, 156, 356, 656, 956, 246, 546, 846, 136, 336, 636, 936, 226, 526, 826, 116, 316, 616, 916, 287, 587, 887, 177, 377, 677, 977, 267, 567, 867, 157, 357, 657, 957, 247, 547, 847, 137, 337, 637, 937, 227, 527, 827, 117, 317, 617, 917, 288, 588, 888, 178, 378, 678, 978, 268, 568, 868, 158, 358, 658, 958, 248, 548, 848, 138, 338, 638, 938, 228, 528, 828, 118, 318, 618, 918, 289, 589, 889, 179, 379, 679, 979, 269, 569, 869, 159, 359, 659, 959, 249, 549, 849, 139, 339, 639, 939, 229, 529, 829, 119, 319, 619, 919, 299, 599, 899, 189, 389, 689, 989, 279, 579, 879, 169, 369, 669, 969, 259, 559, 859, 149, 349, 649, 949, 239, 539, 839, 129, 329, 629, 929, 298, 598, 898, 188, 388, 688, 988, 278, 578, 878, 168, 368, 668, 968, 258, 558, 858, 148, 348, 648, 948, 238, 538, 838, 128, 328, 628, 928, 297, 597, 897, 187, 387, 687, 987, 277, 577, 877, 167, 367, 667, 967, 257, 557, 857, 147, 347, 647, 947, 237, 537, 837, 127, 327, 627, 927, 296, 596, 896, 186, 386, 686, 986, 276, 576, 876, 166, 366, 666, 966, 256, 556, 856, 146, 346, 646, 946, 236, 536, 836, 126, 326, 626, 926, 295, 595, 895, 185, 385, 685, 985, 275, 575, 875, 165, 365, 665, 965, 255, 555, 855, 145, 345, 645, 945, 235, 535, 835, 125, 325, 625, 925, 294, 594, 894, 184, 384, 684, 984, 274, 574, 874, 164, 364, 664, 964, 254, 554, 854, 144, 344, 644, 944, 234, 534, 834, 124, 324, 624, 924, 293, 593, 893, 183, 383, 683, 983, 273, 573, 873, 163, 363, 663, 963, 253, 553, 853, 143, 343];


    println!("{:?}", merge_sort(&giant_array));
}
